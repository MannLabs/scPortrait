
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>pipeline &#8212; scPortrait</title>



  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />

  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pages/module/pipeline';</script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="processing" href="processing.html" />
    <link rel="prev" title="Module Documentation" href="../module.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>


  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">



  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>

  <div id="pst-scroll-pixel-helper"></div>

  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>


  <dialog id="pst-search-dialog">

<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>


    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">



      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">



  <div class="sidebar-header-items sidebar-primary__section">




  </div>

    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">





<a class="navbar-brand logo" href="../../index.html">










    <img src="../../_static/scPortrait_logo_light.svg" class="logo__image only-light" alt="scPortrait - Home"/>
    <img src="../../_static/scPortrait_logo_dark.svg" class="logo__image only-dark pst-js-only" alt="scPortrait - Home"/>


</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../quickstart.html">Quickstart</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/example_scPortrait_project.html">A walk through the scPortrait Ecosystem</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../pipeline.html">Workflow</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/project.html">scPortrait Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/config.html">Config Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/spatialdata.html">SpatialData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/stitching.html">Stitching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/segmentation.html">Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/extraction.html">Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/featurization.html">Featurization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/selection.html">Selection</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/example_scPortrait_project.html">A walk through the scPortrait Ecosystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/example_notebook_segmentation_workflows.html">Different segmentation workflows</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tools/parsing/parsing.html">Parsing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/parsing/example_parsing_notebook.html">Example Parsing Notebook to rename phenix experiments</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tools/stitching/stitching.html">Stitching</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/stitching/example_stitching_notebook.html">Example Stitching Notebook</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module API</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../module.html">Module Documentation</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active has-children"><a class="current reference internal" href="#">pipeline</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="processing.html">processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html">io</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tools.html">tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="tools/parsing.html">parse</a></li>


<li class="toctree-l3"><a class="reference internal" href="tools/stitching.html">stitch</a></li>


<li class="toctree-l3 has-children"><a class="reference internal" href="tools/ml.html">ml</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>


  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>

  <div id="rtd-footer-container"></div>


      </div>

      <main id="main-content" class="bd-main" role="main">



<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">

              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">

    <div class="header-article-items__start">

        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>

    </div>


    <div class="header-article-items__end">

        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">



      <li><a href="../../_sources/pages/module/pipeline.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>




      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>

  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>

    </div>

</div>
</div>



<div id="jb-print-docs-body" class="onlyprint">
    <h1>pipeline</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">

            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#project">project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Project</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project"><code class="docutils literal notranslate"><span class="pre">Project</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_IMAGE_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_IMAGE_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_SEGMENTATION_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SEGMENTATION_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.update_classification_f"><code class="docutils literal notranslate"><span class="pre">Project.update_classification_f()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.load_input_from_tif_files"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_tif_files()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.load_input_from_sdata"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_sdata()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.select"><code class="docutils literal notranslate"><span class="pre">Project.select()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation">segmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Segmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation"><code class="docutils literal notranslate"><span class="pre">Segmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.maps"><code class="docutils literal notranslate"><span class="pre">Segmentation.maps</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE"><code class="docutils literal notranslate"><span class="pre">Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG"><code class="docutils literal notranslate"><span class="pre">Segmentation.PRINT_MAPS_ON_DEBUG</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.identifier"><code class="docutils literal notranslate"><span class="pre">Segmentation.identifier</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.window"><code class="docutils literal notranslate"><span class="pre">Segmentation.window</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.input_path"><code class="docutils literal notranslate"><span class="pre">Segmentation.input_path</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.save_map"><code class="docutils literal notranslate"><span class="pre">Segmentation.save_map()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.process"><code class="docutils literal notranslate"><span class="pre">Segmentation.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shardedsegmentation">ShardedSegmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation.process"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation.process()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation.complete_segmentation"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation.complete_segmentation()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-scportrait.pipeline.segmentation.workflows">segmentation workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation"><code class="docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation.process"><code class="docutils literal notranslate"><span class="pre">WGASegmentation.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation"><code class="docutils literal notranslate"><span class="pre">DAPISegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation.process"><code class="docutils literal notranslate"><span class="pre">DAPISegmentation.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">DAPISegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose.process"><code class="docutils literal notranslate"><span class="pre">DAPISegmentationCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationDownsamplingCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationDownsamplingCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationDownsamplingCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationDownsamplingCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolOnlySegmentationCellpose</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Cellpose_Segmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation.method"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Cellpose_Segmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose"><code class="docutils literal notranslate"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extraction">extraction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hdf5cellextraction">HDF5CellExtraction</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.extraction.HDF5CellExtraction"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.extraction.HDF5CellExtraction.process"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classification">classification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mlclusterclassifier">MLClusterClassifier</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.__call__"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.__call__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_MODEL_CLASS"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.DEFAULT_MODEL_CLASS</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_DATA_LOADER"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.DEFAULT_DATA_LOADER</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.process"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellfeaturizer">CellFeaturizer</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer.__call__"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer.__call__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer.process"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selection">selection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lmdselection">LMDSelection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.selection.LMDSelection"><code class="docutils literal notranslate"><span class="pre">LMDSelection</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.selection.LMDSelection.process"><code class="docutils literal notranslate"><span class="pre">LMDSelection.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>



<div id="searchbox"></div>
                <article class="bd-article">

  <section id="pipeline">
<h1>pipeline<a class="headerlink" href="#pipeline" title="Link to this heading">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="project">
<h2>project<a class="headerlink" href="#project" title="Link to this heading">#</a></h2>
<p>Within scPortrait, all operations are centered around the concept of a <code class="docutils literal notranslate"><span class="pre">Project</span></code>. A <code class="docutils literal notranslate"><span class="pre">Project</span></code> is a python class which manages all of the scPortrait processing steps and is the central element through which all operations are performed. Each <code class="docutils literal notranslate"><span class="pre">Project</span></code> directly maps to a directory on the file system which contains all of the inputs to a specific scPortrait run as well as the generated outputs. Depending on the structure of the data that is to be processed a different Project class is required. Please see <a class="reference internal" href="../pipeline/project.html#projects"><span class="std std-ref">here</span></a> for more information.</p>
<section id="id1">
<h3>Project<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.project.</span></span><span class="sig-name descname"><span class="pre">Project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmentation_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extraction_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classification_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.project.Project" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Logable</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.DEFAULT_IMAGE_DTYPE">
<span class="sig-name descname"><span class="pre">DEFAULT_IMAGE_DTYPE</span></span><a class="headerlink" href="#scportrait.pipeline.project.Project.DEFAULT_IMAGE_DTYPE" title="Link to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">uint16</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.DEFAULT_SEGMENTATION_DTYPE">
<span class="sig-name descname"><span class="pre">DEFAULT_SEGMENTATION_DTYPE</span></span><a class="headerlink" href="#scportrait.pipeline.project.Project.DEFAULT_SEGMENTATION_DTYPE" title="Link to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">uint32</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE">
<span class="sig-name descname"><span class="pre">DEFAULT_SINGLE_CELL_IMAGE_DTYPE</span></span><a class="headerlink" href="#scportrait.pipeline.project.Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE" title="Link to this definition">#</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">float16</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.update_classification_f">
<span class="sig-name descname"><span class="pre">update_classification_f</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">classification_f</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#scportrait.pipeline.project.Project.update_classification_f" title="Link to this definition">#</a></dt>
<dd><p>Update the classification method chosen for the project without reinitializing the entire project.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>classification_f</strong> (<em>class</em>) – The classification method that should be used for the project.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.load_input_from_tif_files">
<span class="sig-name descname"><span class="pre">load_input_from_tif_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.project.Project.load_input_from_tif_files" title="Link to this definition">#</a></dt>
<dd><p>Load input image from a list of files. The channels need to be specified in the following order: nucleus, cytosol other channels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_paths</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List containing paths to each channel like
[“path1/img.tiff”, “path2/img.tiff”, “path3/img.tiff”].
Expects a list of file paths with length “input_channel” as
defined in the config.yml.</p></li>
<li><p><strong>crop</strong> (<em>List</em><em>[</em><em>Tuple</em><em>]</em><em>, </em><em>optional</em>) – When set, it can be used to crop the input image. The first
element refers to the first dimension of the image and so on.
For example use “[(0,1000),(0,2000)]” to crop the image to
1000 px height and 2000 px width from the top left corner.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.load_input_from_sdata">
<span class="sig-name descname"><span class="pre">load_input_from_sdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sdata_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_image_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'input_image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nucleus_segmentation_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cytosol_segmentation_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.project.Project.load_input_from_sdata" title="Link to this definition">#</a></dt>
<dd><p>Load input image from a spatialdata object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.project.Project.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cell_sets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration_marker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segmentation_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'seg_all_nucleus'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.project.Project.select" title="Link to this definition">#</a></dt>
<dd><p>Select specified classes using the defined selection method.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="segmentation">
<h2>segmentation<a class="headerlink" href="#segmentation" title="Link to this heading">#</a></h2>
<section id="id2">
<h3>Segmentation<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.</span></span><span class="sig-name descname"><span class="pre">Segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nuc_seg_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cyto_seg_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_tmp_image_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project_location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filehandler</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessingStep</span></code></p>
<p>Segmentation helper class used for creating segmentation workflows.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.maps">
<span class="sig-name descname"><span class="pre">maps</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.maps" title="Link to this definition">#</a></dt>
<dd><p>Segmentation workflows based on the <a class="reference internal" href="#scportrait.pipeline.segmentation.Segmentation" title="scportrait.pipeline.segmentation.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a> class can use maps for saving and loading checkpoints and perform. Maps can be numpy arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE">
<span class="sig-name descname"><span class="pre">DEFAULT_FILTER_ADDTIONAL_FILE</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">filtered_classes.csv</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG">
<span class="sig-name descname"><span class="pre">PRINT_MAPS_ON_DEBUG</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool, default <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.identifier">
<span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.identifier" title="Link to this definition">#</a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#scportrait.pipeline.segmentation.ShardedSegmentation" title="scportrait.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Unique index of the shard.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int, default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.window">
<span class="sig-name descname"><span class="pre">window</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.window" title="Link to this definition">#</a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#scportrait.pipeline.segmentation.ShardedSegmentation" title="scportrait.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Defines the window which is assigned to the shard. The window will be applied to the input. The first element refers to the first dimension of the image and so on. For example use <code class="docutils literal notranslate"><span class="pre">[(0,1000),(0,2000)]</span></code> To crop the image to <cite>1000 px height</cite> and <cite>2000 px width</cite> from the top left corner.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list(tuple), default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.input_path">
<span class="sig-name descname"><span class="pre">input_path</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.input_path" title="Link to this definition">#</a></dt>
<dd><p>Only set if called by <a class="reference internal" href="#scportrait.pipeline.segmentation.ShardedSegmentation" title="scportrait.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a>. Location of the input hdf5 file. During sharded segmentation the <a class="reference internal" href="#scportrait.pipeline.segmentation.ShardedSegmentation" title="scportrait.pipeline.segmentation.ShardedSegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a> derived helper class will save the input image in form of a hdf5 file. This makes the input image available for parallel reading by the segmentation processes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, default <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># two maps are initialized</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">maps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;map0&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;map1&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

    <span class="c1"># its checked if the segmentation directory already contains these maps and they are then loaded. The index of the first map which has not been found is returned. It indicates the step where computation needs to resume</span>
    <span class="n">current_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_maps_from_disk</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># do stuff and generate map0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;map0&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># do stuff and generate map1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;map1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.save_map">
<span class="sig-name descname"><span class="pre">save_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.save_map" title="Link to this definition">#</a></dt>
<dd><p>Saves newly computed map.</p>
<dl class="simple">
<dt>Args</dt><dd><p>map_name (str): name of the map to be saved, as defined in <code class="docutils literal notranslate"><span class="pre">self.maps</span></code>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># declare all intermediate maps</span>
<span class="bp">self</span><span class="o">.</span><span class="n">maps</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;myMap&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

<span class="c1"># load intermediate maps if possible and get current processing step</span>
<span class="n">current_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_maps_from_disk</span><span class="p">()</span>

<span class="k">if</span> <span class="n">current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># do some computations</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">maps</span><span class="p">[</span><span class="s2">&quot;myMap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myNumpyArray</span>

    <span class="c1"># save map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_map</span><span class="p">(</span><span class="s2">&quot;myMap&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.Segmentation.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.Segmentation.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

</section>
<section id="shardedsegmentation">
<h3>ShardedSegmentation<a class="headerlink" href="#shardedsegmentation" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.ShardedSegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.</span></span><span class="sig-name descname"><span class="pre">ShardedSegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.ShardedSegmentation" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#scportrait.pipeline.segmentation.Segmentation" title="scportrait.pipeline.segmentation.segmentation.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Segmentation</span></code></a></p>
<p>To perform a sharded segmentation where the input image is split into individual tiles (with overlap) that are processed idnividually before the results are joined back together.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.ShardedSegmentation.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.ShardedSegmentation.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the sharded segmentation method.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function is called automatically when a Segmentation Class is executed.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_image</strong> (<em>np.array</em>) – Input image to be processed. The input image should be a numpy array of shape (C, H, W) where C is the number of channels, H is the height of the image and W is the width of the image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.ShardedSegmentation.complete_segmentation">
<span class="sig-name descname"><span class="pre">complete_segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.ShardedSegmentation.complete_segmentation" title="Link to this definition">#</a></dt>
<dd><p>Complete an already started sharded segmentation of the provided input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_image</strong> (<em>np.array</em>) – Input image to be processed. The input image should be a numpy array of shape (C, H, W) where C is the number of channels, H is the height of the image and W is the width of the image.</p></li>
<li><p><strong>force_run</strong> (<em>bool</em>) – If set to True the segmentation will be run even if a completed segmentation is already found in the sdata object. Default is False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-scportrait.pipeline.segmentation.workflows">
<span id="segmentation-workflows"></span><h2>segmentation workflows<a class="headerlink" href="#module-scportrait.pipeline.segmentation.workflows" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.WGASegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">WGASegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.WGASegmentation.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedWGASegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation" title="scportrait.pipeline.segmentation.workflows.WGASegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.DAPISegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">DAPISegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.DAPISegmentation.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedDAPISegmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation" title="scportrait.pipeline.segmentation.workflows.DAPISegmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAPISegmentation</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">DAPISegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedDAPISegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose" title="scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">DAPISegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolSegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedCytosolSegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose" title="scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolSegmentationDownsamplingCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">ShardedCytosolSegmentationDownsamplingCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose" title="scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolSegmentationDownsamplingCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolOnlySegmentationCellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">Sharded_CytosolOnly_Cellpose_Segmentation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose" title="scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolOnlySegmentationCellpose</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_image</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose.process" title="Link to this definition">#</a></dt>
<dd><p>Process the input image with the segmentation method.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.segmentation.workflows.</span></span><span class="sig-name descname"><span class="pre">Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose" title="Link to this definition">#</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose" title="scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose"><code class="xref py py-class docutils literal notranslate"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose</span></code></a></p>
</dd></dl>

</dd></dl>

</section>
<section id="extraction">
<h2>extraction<a class="headerlink" href="#extraction" title="Link to this heading">#</a></h2>
<section id="hdf5cellextraction">
<h3>HDF5CellExtraction<a class="headerlink" href="#hdf5cellextraction" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.extraction.HDF5CellExtraction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.extraction.</span></span><span class="sig-name descname"><span class="pre">HDF5CellExtraction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.extraction.HDF5CellExtraction" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessingStep</span></code></p>
<p>A class to extracts single cell images from a segmented scPortrait project and save the
results to an HDF5 file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.extraction.HDF5CellExtraction.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cells</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.extraction.HDF5CellExtraction.process" title="Link to this definition">#</a></dt>
<dd><p>Extracts single cell images from a segmented scPortrait project and saves the results to an HDF5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_segmentation_path</strong> (<em>str</em>) – Path of the segmentation HDF5 file. If this class is used as part of a project processing workflow, this argument will be provided automatically.</p></li>
<li><p><strong>filtered_classes_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to the filtered classes that should be used for extraction. Default is None. If not provided, will use the automatically generated paths.</p></li>
</ul>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If this class is used as part of a project processing workflow, all of the arguments will be provided by the <code class="docutils literal notranslate"><span class="pre">Project</span></code> class based on the previous segmentation.
The Project class will automatically provide the most recent segmentation forward together with the supplied parameters.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># After project is initialized and input data has been loaded and segmented</span>
<span class="n">project</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>The following parameters are required in the config file when running this method:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">HDF5CellExtraction</span><span class="p">:</span>

<span class="w">    </span><span class="nt">compression</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">    </span><span class="c1"># threads used in multithreading</span>
<span class="w">    </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>

<span class="w">    </span><span class="c1"># image size in pixels</span>
<span class="w">    </span><span class="nt">image_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">128</span>

<span class="w">    </span><span class="c1"># directory where intermediate results should be saved</span>
<span class="w">    </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/mnt/temp/cache&quot;</span>

<span class="w">    </span><span class="c1"># specs to define how HDF5 data should be chunked and saved</span>
<span class="w">    </span><span class="nt">hdf5_rdcc_nbytes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5242880000</span><span class="w"> </span><span class="c1"># 5GB 1024 * 1024 * 5000</span>
<span class="w">    </span><span class="nt">hdf5_rdcc_w0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">hdf5_rdcc_nslots</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50000</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="classification">
<h2>classification<a class="headerlink" href="#classification" title="Link to this heading">#</a></h2>
<section id="mlclusterclassifier">
<h3>MLClusterClassifier<a class="headerlink" href="#mlclusterclassifier" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.MLClusterClassifier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.classification.</span></span><span class="sig-name descname"><span class="pre">MLClusterClassifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.MLClusterClassifier" title="Link to this definition">#</a></dt>
<dd><p>Class for classifying single cells using a pre-trained machine learning model.</p>
<p>This class takes a pre-trained model and uses it to classify single cells,
using the model’s forward function or encoder function, depending on the
user’s choice. The classification results are saved to a CSV file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.MLClusterClassifier.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.MLClusterClassifier.__call__" title="Link to this definition">#</a></dt>
<dd><p>Call the processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>debug</strong> (bool, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Allows overriding the value set on initiation. When set to True debug outputs will be printed where applicable.</p></li>
<li><p><strong>overwrite</strong> (bool, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Allows overriding the value set on initiation. When set to True, the processing step directory will be completely deleted and newly created when called.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_MODEL_CLASS">
<span class="sig-name descname"><span class="pre">DEFAULT_MODEL_CLASS</span></span><a class="headerlink" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_MODEL_CLASS" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="tools/ml.html#scportrait.tools.ml.plmodels.MultilabelSupervisedModel" title="scportrait.tools.ml.plmodels.MultilabelSupervisedModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultilabelSupervisedModel</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_DATA_LOADER">
<span class="sig-name descname"><span class="pre">DEFAULT_DATA_LOADER</span></span><a class="headerlink" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_DATA_LOADER" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="tools/ml.html#scportrait.tools.ml.datasets.HDF5SingleCellDataset" title="scportrait.tools.ml.datasets.HDF5SingleCellDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">HDF5SingleCellDataset</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.MLClusterClassifier.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extraction_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.MLClusterClassifier.process" title="Link to this definition">#</a></dt>
<dd><p>Perform classification on the provided HDF5 dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extraction_dir</strong> (<em>str</em>) – Directory containing the extracted HDF5 files from the project. If this class is used as part of
a project processing workflow, this argument will be provided automatically.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – How many cells should be selected for inference. Default is 0, which means all cells are selected.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Results are written to CSV files located in the project directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If this class is used as part of a project processing workflow, the first argument will be provided by the <code class="docutils literal notranslate"><span class="pre">Project</span></code>
class based on the previous single-cell extraction. Therefore, only the second and third arguments need to be provided.
The Project class will automatically provide the most recent extracted single-cell dataset together with the supplied parameters.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">.</span><span class="n">classify</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>The following parameters are required in the config file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">MLClusterClassifier</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Channel number on which the classification should be performed</span>
<span class="w">    </span><span class="nt">channel_classification</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">    </span><span class="c1"># Number of threads to use for dataloader</span>
<span class="w">    </span><span class="nt">dataloader_worker_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>

<span class="w">    </span><span class="c1"># Batch size to pass to GPU</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">900</span>

<span class="w">    </span><span class="c1"># Path to PyTorch checkpoint that should be used for inference</span>
<span class="w">    </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;path/to/model/&quot;</span>

<span class="w">    </span><span class="c1"># Classifier architecture implemented in scPortrait</span>
<span class="w">    </span><span class="c1"># Choose one of VGG1, VGG2, VGG1_old, VGG2_old</span>
<span class="w">    </span><span class="nt">classifier_architecture</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;VGG2_old&quot;</span>

<span class="w">    </span><span class="c1"># If more than one checkpoint is provided in the network directory, which checkpoint should be chosen</span>
<span class="w">    </span><span class="c1"># Should either be &quot;max&quot; or a numeric value indicating the epoch number</span>
<span class="w">    </span><span class="nt">epoch</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;max&quot;</span>

<span class="w">    </span><span class="c1"># Name of the classifier used for saving the classification results to a directory</span>
<span class="w">    </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Autophagy_15h_classifier1&quot;</span>

<span class="w">    </span><span class="c1"># List of which inference methods should be performed</span>
<span class="w">    </span><span class="c1"># Available: &quot;forward&quot; and &quot;encoder&quot;</span>
<span class="w">    </span><span class="c1"># If &quot;forward&quot;: images are passed through all layers of the model and the final inference results are written to file</span>
<span class="w">    </span><span class="c1"># If &quot;encoder&quot;: activations at the end of the CNN are written to file</span>
<span class="w">    </span><span class="nt">encoders</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;forward&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;encoder&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># On which device inference should be performed</span>
<span class="w">    </span><span class="c1"># For speed, should be &quot;cuda&quot;</span>
<span class="w">    </span><span class="nt">inference_device</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cuda&quot;</span>

<span class="w">    </span><span class="c1">#define dataset transforms</span>
<span class="w">    </span><span class="nt">transforms</span><span class="p">:</span>
<span class="w">        </span><span class="nt">resize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">128</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="cellfeaturizer">
<h3>CellFeaturizer<a class="headerlink" href="#cellfeaturizer" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.CellFeaturizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.classification.</span></span><span class="sig-name descname"><span class="pre">CellFeaturizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.CellFeaturizer" title="Link to this definition">#</a></dt>
<dd><p>Class for extracting general image features from SPARCS single-cell image datasets.
The extracted features are saved to a CSV file. The features are calculated on the basis of a specified channel.</p>
<p>The features which are calculated are:</p>
<ul class="simple">
<li><p>Area of the masks in pixels</p></li>
<li><p>Mean intensity of the chosen channel in the regions labelled by each of the masks</p></li>
<li><p>Median intensity of the chosen channel in the regions labelled by each of the masks</p></li>
<li><p>75% quantile of the chosen channel in the regions labelled by each of the masks</p></li>
<li><p>25% quantile of the chosen channel in the regions labelled by each of the masks</p></li>
<li><p>Summed intensity of the chosen channel in the regions labelled by each of the masks</p></li>
<li><p>Summed intensity of the chosen channel in the region labelled by each of the masks normalized for area</p></li>
</ul>
<p>The features are outputed in this order in the CSV file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.CellFeaturizer.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.CellFeaturizer.__call__" title="Link to this definition">#</a></dt>
<dd><p>Call the processing step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>debug</strong> (bool, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Allows overriding the value set on initiation. When set to True debug outputs will be printed where applicable.</p></li>
<li><p><strong>overwrite</strong> (bool, optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Allows overriding the value set on initiation. When set to True, the processing step directory will be completely deleted and newly created when called.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.classification.CellFeaturizer.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extraction_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.classification.CellFeaturizer.process" title="Link to this definition">#</a></dt>
<dd><p>Perform featurization on the provided HDF5 dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extraction_dir</strong> (<em>str</em>) – Directory containing the extracted HDF5 files from the project. If this class is used as part of a project processing workflow this argument will be provided automatically.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em><em>, </em><em>default=0</em>) – How many cells should be selected for inference. Default is 0, meaning all cells are selected.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Results are written to CSV files located in the project directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If this class is used as part of a project processing workflow, the first argument will be provided by the <code class="docutils literal notranslate"><span class="pre">Project</span></code> class based on the previous single-cell extraction. Therefore, only the second and third argument need to be provided. The Project class will automatically provide the most recent extraction results together with the supplied parameters.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define accessory dataset: additional HDF5 datasets that you want to perform an inference on</span>
<span class="c1"># Leave empty if you only want to infer on all extracted cells in the current project</span>

<span class="n">project</span><span class="o">.</span><span class="n">classify</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>The following parameters are required in the config file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">CellFeaturizer</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Channel number on which the featurization should be performed</span>
<span class="w">    </span><span class="nt">channel_classification</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">    </span><span class="c1"># Number of threads to use for dataloader</span>
<span class="w">    </span><span class="nt">dataloader_worker_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"> </span><span class="c1"># needs to be 0 if using CPU</span>

<span class="w">    </span><span class="c1"># Batch size to pass to GPU</span>
<span class="w">    </span><span class="nt">batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">900</span>

<span class="w">    </span><span class="c1"># On which device inference should be performed</span>
<span class="w">    </span><span class="c1"># For speed should be &quot;cuda&quot;</span>
<span class="w">    </span><span class="nt">inference_device</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span>

<span class="w">    </span><span class="c1"># Label under which the results should be saved</span>
<span class="w">    </span><span class="nt">screen_label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch3_Featurization&quot;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="selection">
<h2>selection<a class="headerlink" href="#selection" title="Link to this heading">#</a></h2>
<section id="lmdselection">
<h3>LMDSelection<a class="headerlink" href="#lmdselection" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="scportrait.pipeline.selection.LMDSelection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">scportrait.pipeline.selection.</span></span><span class="sig-name descname"><span class="pre">LMDSelection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.selection.LMDSelection" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessingStep</span></code></p>
<p>Select single cells from a segmented sdata file and generate cutting data for the Leica LMD microscope.
This method class relies on the functionality of the pylmd library.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scportrait.pipeline.selection.LMDSelection.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">segmentation_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_sets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration_marker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scportrait.pipeline.selection.LMDSelection.process" title="Link to this definition">#</a></dt>
<dd><p>Process function for selecting cells and generating their XML.
Under the hood this method relies on the pylmd library and utilizies its <cite>SegmentationLoader</cite> Class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmentation_name</strong> (<em>str</em>) – Name of the segmentation to be used for shape generation in the sdata object.</p></li>
<li><p><strong>cell_sets</strong> (<em>list</em><em> of </em><em>dict</em>) – List of dictionaries containing the sets of cells which should be sorted into a single well. Mandatory keys for each dictionary are: name, classes. Optional keys are: well.</p></li>
<li><p><strong>calibration_marker</strong> (<em>numpy.array</em>) – Array of size ‘(3,2)’ containing the calibration marker coordinates in the ‘(row, column)’ format.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calibration marker should be defined as (row, column).</span>
<span class="n">marker_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">])</span>
<span class="n">marker_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1100</span><span class="p">])</span>
<span class="n">marker_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">505</span><span class="p">])</span>

<span class="c1"># A numpy Array of shape (3, 2) should be passed.</span>
<span class="n">calibration_marker</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">marker_0</span><span class="p">,</span> <span class="n">marker_1</span><span class="p">,</span> <span class="n">marker_2</span><span class="p">])</span>


<span class="c1"># Sets of cells can be defined by providing a name and a list of classes in a dictionary.</span>
<span class="n">cells_to_select</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset1&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}]</span>

<span class="c1"># Alternatively, a path to a csv file can be provided.</span>
<span class="c1"># If a relative path is provided, it is accessed relativ to the projects base directory.</span>
<span class="n">cells_to_select</span> <span class="o">+=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset2&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="s2">&quot;segmentation/class_subset.csv&quot;</span><span class="p">}]</span>

<span class="c1"># If desired, wells can be passed with the individual sets.</span>
<span class="n">cells_to_select</span> <span class="o">+=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dataset3&quot;</span><span class="p">,</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;well&quot;</span><span class="p">:</span> <span class="s2">&quot;A1&quot;</span><span class="p">}]</span>

<span class="n">project</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">cells_to_select</span><span class="p">,</span> <span class="n">calibration_marker</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following parameters are required in the config file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">LMDSelection</span><span class="p">:</span>
<span class="w">    </span><span class="c1">#the number of threads with which multithreaded tasks should be executed</span>
<span class="w">    </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">    </span><span class="c1"># the number of parallel processes to use for generation of cell sets each set</span>
<span class="w">    </span><span class="c1"># will processed with the designated number of threads</span>
<span class="w">    </span><span class="nt">processes_cell_sets</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">    </span><span class="c1"># defines the channel used for generating cutting masks</span>
<span class="w">    </span><span class="c1"># segmentation.hdf5 =&gt; labels =&gt; segmentation_channel</span>
<span class="w">    </span><span class="c1"># When using WGA segmentation:</span>
<span class="w">    </span><span class="c1">#    0 corresponds to nuclear masks</span>
<span class="w">    </span><span class="c1">#    1 corresponds to cytosolic masks.</span>
<span class="w">    </span><span class="nt">segmentation_channel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># dilation of the cutting mask in pixel</span>
<span class="w">    </span><span class="nt">shape_dilation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">    </span><span class="c1"># Cutting masks are transformed by binary dilation and erosion</span>
<span class="w">    </span><span class="nt">binary_smoothing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">    </span><span class="c1"># number of datapoints which are averaged for smoothing</span>
<span class="w">    </span><span class="c1"># the number of datapoints over an distance of n pixel is 2*n</span>
<span class="w">    </span><span class="nt">convolution_smoothing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25</span>

<span class="w">    </span><span class="c1"># fold reduction of datapoints for compression</span>
<span class="w">    </span><span class="nt">poly_compression_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">    </span><span class="c1"># Optimization of the cutting path inbetween shapes</span>
<span class="w">    </span><span class="c1"># optimized paths improve the cutting time and the microscopes focus</span>
<span class="w">    </span><span class="c1"># valid options are [&quot;none&quot;, &quot;hilbert&quot;, &quot;greedy&quot;]</span>
<span class="w">    </span><span class="nt">path_optimization</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hilbert&quot;</span>

<span class="w">    </span><span class="c1"># Paramter required for hilbert curve based path optimization.</span>
<span class="w">    </span><span class="c1"># Defines the order of the hilbert curve used, which needs to be tuned with the total cutting area.</span>
<span class="w">    </span><span class="c1"># For areas of 1 x 1 mm we recommend at least p = 4,  for whole slides we recommend p = 7.</span>
<span class="w">    </span><span class="nt">hilbert_p</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>

<span class="w">    </span><span class="c1"># Parameter required for greedy path optimization.</span>
<span class="w">    </span><span class="c1"># Instead of a global distance matrix, the k nearest neighbours are approximated.</span>
<span class="w">    </span><span class="c1"># The optimization problem is then greedily solved for the known set of nearest neighbours until the first set of neighbours is exhausted.</span>
<span class="w">    </span><span class="c1"># Established edges are then removed and the nearest neighbour approximation is recursivly repeated.</span>
<span class="w">    </span><span class="nt">greedy_k</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>

<span class="w">    </span><span class="c1"># The LMD reads coordinates as integers which leads to rounding of decimal places.</span>
<span class="w">    </span><span class="c1"># Points spread between two whole coordinates are therefore collapsed to whole coordinates.</span>
<span class="w">    </span><span class="c1"># This can be mitigated by scaling the entire coordinate system by a defined factor.</span>
<span class="w">    </span><span class="c1"># For a resolution of 0.6 um / px a factor of 100 is recommended.</span>
<span class="w">    </span><span class="nt">xml_decimal_transform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="w">    </span><span class="c1"># Overlapping shapes are merged based on a nearest neighbour heuristic.</span>
<span class="w">    </span><span class="c1"># All selected shapes closer than distance_heuristic pixel are checked for overlap.</span>
<span class="w">    </span><span class="nt">distance_heuristic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


                </article>






                <footer class="prev-next-footer d-print-none">

<div class="prev-next-area">
    <a class="left-prev"
       href="../module.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Module Documentation</p>
      </div>
    </a>
    <a class="right-next"
       href="processing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">processing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>

            </div>



                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#project">project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Project</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project"><code class="docutils literal notranslate"><span class="pre">Project</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_IMAGE_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_IMAGE_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_SEGMENTATION_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SEGMENTATION_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE"><code class="docutils literal notranslate"><span class="pre">Project.DEFAULT_SINGLE_CELL_IMAGE_DTYPE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.update_classification_f"><code class="docutils literal notranslate"><span class="pre">Project.update_classification_f()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.load_input_from_tif_files"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_tif_files()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.load_input_from_sdata"><code class="docutils literal notranslate"><span class="pre">Project.load_input_from_sdata()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.project.Project.select"><code class="docutils literal notranslate"><span class="pre">Project.select()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#segmentation">segmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Segmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation"><code class="docutils literal notranslate"><span class="pre">Segmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.maps"><code class="docutils literal notranslate"><span class="pre">Segmentation.maps</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE"><code class="docutils literal notranslate"><span class="pre">Segmentation.DEFAULT_FILTER_ADDTIONAL_FILE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.PRINT_MAPS_ON_DEBUG"><code class="docutils literal notranslate"><span class="pre">Segmentation.PRINT_MAPS_ON_DEBUG</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.identifier"><code class="docutils literal notranslate"><span class="pre">Segmentation.identifier</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.window"><code class="docutils literal notranslate"><span class="pre">Segmentation.window</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.input_path"><code class="docutils literal notranslate"><span class="pre">Segmentation.input_path</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.save_map"><code class="docutils literal notranslate"><span class="pre">Segmentation.save_map()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.Segmentation.process"><code class="docutils literal notranslate"><span class="pre">Segmentation.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shardedsegmentation">ShardedSegmentation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation.process"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation.process()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.ShardedSegmentation.complete_segmentation"><code class="docutils literal notranslate"><span class="pre">ShardedSegmentation.complete_segmentation()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-scportrait.pipeline.segmentation.workflows">segmentation workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation"><code class="docutils literal notranslate"><span class="pre">WGASegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.WGASegmentation.process"><code class="docutils literal notranslate"><span class="pre">WGASegmentation.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedWGASegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedWGASegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation"><code class="docutils literal notranslate"><span class="pre">DAPISegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentation.process"><code class="docutils literal notranslate"><span class="pre">DAPISegmentation.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentation.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">DAPISegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.DAPISegmentationCellpose.process"><code class="docutils literal notranslate"><span class="pre">DAPISegmentationCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedDAPISegmentationCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedDAPISegmentationCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationCellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationDownsamplingCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolSegmentationDownsamplingCellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolSegmentationDownsamplingCellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationDownsamplingCellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.ShardedCytosolSegmentationDownsamplingCellpose.method"><code class="docutils literal notranslate"><span class="pre">ShardedCytosolSegmentationDownsamplingCellpose.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnlySegmentationCellpose"><code class="docutils literal notranslate"><span class="pre">CytosolOnlySegmentationCellpose</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Cellpose_Segmentation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Cellpose_Segmentation.method"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Cellpose_Segmentation.method</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose"><code class="docutils literal notranslate"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.CytosolOnly_Segmentation_Downsampling_Cellpose.process"><code class="docutils literal notranslate"><span class="pre">CytosolOnly_Segmentation_Downsampling_Cellpose.process()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.segmentation.workflows.Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method"><code class="docutils literal notranslate"><span class="pre">Sharded_CytosolOnly_Segmentation_Downsampling_Cellpose.method</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extraction">extraction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hdf5cellextraction">HDF5CellExtraction</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.extraction.HDF5CellExtraction"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.extraction.HDF5CellExtraction.process"><code class="docutils literal notranslate"><span class="pre">HDF5CellExtraction.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classification">classification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mlclusterclassifier">MLClusterClassifier</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.__call__"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.__call__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_MODEL_CLASS"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.DEFAULT_MODEL_CLASS</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.DEFAULT_DATA_LOADER"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.DEFAULT_DATA_LOADER</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.MLClusterClassifier.process"><code class="docutils literal notranslate"><span class="pre">MLClusterClassifier.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellfeaturizer">CellFeaturizer</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer.__call__"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer.__call__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.classification.CellFeaturizer.process"><code class="docutils literal notranslate"><span class="pre">CellFeaturizer.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selection">selection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lmdselection">LMDSelection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.selection.LMDSelection"><code class="docutils literal notranslate"><span class="pre">LMDSelection</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#scportrait.pipeline.selection.LMDSelection.process"><code class="docutils literal notranslate"><span class="pre">LMDSelection.process()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>


          </div>
          <footer class="bd-footer-content">

<div class="bd-footer-content__inner container">

  <div class="footer-item">

<p class="component-author">
By Sophia Mädler and Niklas Schmacke
</p>

  </div>

  <div class="footer-item">


  <p class="copyright">

      © Copyright 2024 Sophia Mädler and Niklas Schmacke.
      <br/>

  </p>

  </div>

  <div class="footer-item">

  </div>

  <div class="footer-item">

  </div>

</div>
          </footer>


      </main>
    </div>
  </div>

  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
